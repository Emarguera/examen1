(function() {
  var CustomEvents;

  CustomEvents = {
    bind: function(element, name, handler) {
      if (element.addEventListener) {
        return element.addEventListener(name, handler, false);
      } else if (element.attachEvent) {
        element[name] = 1;
        return element.attachEvent('onpropertychange', function(event) {
          if (event.propertyName === name) {
            return handler();
          }
        });
      } else {
        throw new Error("Attempt to attach custom event " + name + " to something which isn't a DOMElement");
      }
    },
    fire: function(element, name) {
      var event;
      if (element.addEventListener) {
        event = document.createEvent('HTMLEvents');
        event.initEvent(name, true, true);
        return document.dispatchEvent(event);
      } else if (element.attachEvent) {
        if (element[name]) {
          return element[name]++;
        }
      } else {
        throw new Error("Attempt to fire custom event " + name + " on something which isn't a DOMElement");
      }
    }
  };

  exports.bind = CustomEvents.bind;

  exports.fire = CustomEvents.fire;

}).call(this);
